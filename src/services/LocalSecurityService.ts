import {Injectable, Logger} from "@nestjs/common";
import {AdminHttpService} from "../lib/AdminHttpService";
import {AppConfig} from "../configsettings/AppConfig";
import { SecurityService } from './SecurityService';
import { ServiceResponse } from "../lib/ServiceResponse";

@Injectable()
export class LocalSecurityService implements SecurityService {
  private readonly logger = new Logger(LocalSecurityService.name);

  constructor(
    public readonly httpService: AdminHttpService,
    public readonly config: AppConfig,
  ) {}

  hasPermissions(token: string): boolean | Promise<boolean> {
    throw new Error('Method not implemented.');
  }
  verifyToken(token: any): void | Promise<void> {
    throw new Error('Method not implemented.');
  }
  getRefreshToken(token: any): ServiceResponse | Promise<ServiceResponse> {
    throw new Error('Method not implemented.');
  }
  getToken(code: string): ServiceResponse | Promise<ServiceResponse> {
    throw new Error('Method not implemented.');
  }

  // private getMockedToken() {
  //   if (process.env.ADMIN_USER) {
  //     return { getData: function() { return {
  //         "access_token" : "eyJraWQiOiIwVTNDV29TbFJPSVcwS2NFVUVOTW1HbXR6Vjdjc1wvVjlVQVJLMDZOK3ZSOD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJiN2Q4ZjZkMS1lNjNiLTRjOGUtYmRlNC04MDc1MWQzZGQ0ZGIiLCJjb2duaXRvOmdyb3VwcyI6WyJBZG1pbiJdLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9uekJqUGw5R3IiLCJ2ZXJzaW9uIjoyLCJjbGllbnRfaWQiOiI3ajVjb2phMWNldW5nOHByZWUzbDQ0ZGZzdSIsIm9yaWdpbl9qdGkiOiIxNzkxOTBmZi1jOGM4LTRkMDMtYjJkNy00MTU2NzQ3YzI4NzciLCJldmVudF9pZCI6IjFhZTAyMGI2LWZmYzgtNDU5Yy1hNDFmLWJlMmY1MmEwYjljMSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoicGhvbmUgb3BlbmlkIGVtYWlsIiwiYXV0aF90aW1lIjoxNjc2MDY1NTc4LCJleHAiOjE2NzYxNTE5NzgsImlhdCI6MTY3NjA2NTU3OCwianRpIjoiZmRiNzliOWItNjAxOS00MWQ2LWJmY2EtOTExNmM4NTk3NjgwIiwidXNlcm5hbWUiOiJnd2FkZGVsbCJ9.OmcX02lpqvFvOdOcsuGx-IbNo_AzlQYDf-E0J-fn3RNWY2qPHsdLc6j7IQKHfpdelh2M-F3cwEoPfnqTsItcv2y805_FM7u1Bv2ndphs0mE6P2XO-aKOn1Evkptb4IaH9vQdf9XB0rTHQnDccV9-zIfcn4toeJUB-xJ1ASbGvyW6zQ88IfAa0wBSOkbZ6A9_O663pGqML7dBpLfGdtOJPssvV1KRADXNyhGlT6ctuj50l8Ey-6AhX7zj8AxwmHi02QudzSN71lbh6MegOy3_f2NI5Lz6w-BZtvsbXtOV2yEqRmQrmn7BlmXVhUlCdyon-AoZAx2GNlG6bnL5e_oO2g",
  //         "expires_in" : new Date().getDate() * 30000,
  //         "id_token": "eyJraWQiOiJlZWFISFVRaVhidnUzMFhNMHhLdVg5cnBIY2lKWEVBVDhRYjZWZ3p1VDBJPSIsImFsZyI6IlJTMjU2In0.eyJhdF9oYXNoIjoiM1pVOV8xdUVNeEZ5Tkk4UnpfYURrdyIsInN1YiI6ImI3ZDhmNmQxLWU2M2ItNGM4ZS1iZGU0LTgwNzUxZDNkZDRkYiIsImNvZ25pdG86Z3JvdXBzIjpbIkFkbWluIl0sImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9uekJqUGw5R3IiLCJjb2duaXRvOnVzZXJuYW1lIjoiZ3dhZGRlbGwiLCJvcmlnaW5fanRpIjoiMTc5MTkwZmYtYzhjOC00ZDAzLWIyZDctNDE1Njc0N2MyODc3IiwiYXVkIjoiN2o1Y29qYTFjZXVuZzhwcmVlM2w0NGRmc3UiLCJldmVudF9pZCI6IjFhZTAyMGI2LWZmYzgtNDU5Yy1hNDFmLWJlMmY1MmEwYjljMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjc2MDY1NTc4LCJleHAiOjE2NzYxNTE5NzgsImlhdCI6MTY3NjA2NTU3OCwianRpIjoiMmZiYWMzOWEtNjcxYy00NDgxLTg0NTItNmUzOTFiMzg5ODY1IiwiZW1haWwiOiJvbm1pZGRsZWdyb3VuZEBnbWFpbC5jb20ifQ.dkq8LXyxTMn3BZh3FXktDNRKMBYbVZPGY3C-5rRbsTaDzIQ82PP-EUUIRWJ-rSKMdkiG3LYchNziJstnYWD6qsxtO_1Od1znkyp5U_-zy4Yqc0zxJzeJit4vj6sn6ScUlQulrg2bETSoeCtBMenrwHvob3A0qw0kjJ2GqClKzQUVjCozfiFRTOgZZX9ctPb-862cVc7UrUmKcrBSDVxTqLEp7sEmj8RmTxXYKzFz9hTbjebNVWz5gWtsCv6sCRD5UJk0KxkSJeoaF3uSJUsgNpDzITOXbrzAD33bNsfVjF7DRwcI4HbTXJbMDcfs--tgrLP5zkWhfwHv78vbiCEFdg",
  //         "refresh_token" : "eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.2ZSQzCPliLYBpGneGZRVapjFZ0AzF7hUzg6eatB4_FHTA6eSlIAvRijqaZm33aOlSi49UJQdG7xVaor2NglczLMgYIZ6Gis95qvkcowvPG_LCjV8OReH3d5HPT686fiiK1bWcqH2iZKW7R9PKKEOoZ_kEf4xRf5uI7ubQUGqdU0gVsVrB3_SD14yingAxEUGMb6b0KlHVmY2u799jTE_csgQU29KD_Lxx9Bj1QOXAS4NAOYICEoz-s26lV-ulfWiyxPDDZ7yadzk6IDIsE9J_mZHfcThJC6LZa52AWfJxolipZaACIYjtrnwKH17a1nO8o5-gSjxKW5QP6lrvudCXg.q30V6wLcFVPDLHL4.AR0dfYcOeV3Nh6Iz4YQZCDn9ejnr317ODrNOwYfXGF7a4GShCZwQfrcOp9Yf9n8JvsIeWBtYi_pZNKP7tXm-5r3pWDmqQk69T-6fQBzDFkLotUHTmCBQ7lbosv8w7ie1izrMyNuy55BdygEgW1lza9Ikx-vGGb8qyO3l4rujF-v0jkh7Sw6WCIr5dmlpqtvNdD0AwPn44IwP8n01hT-jdzEYR6B8MZY5psf7zBjhLmh3974cnunXP0wNBxzr2pzgxq0GLOeudKNSgoGDJiVWeuyVRG28geUN75gcKd2ZPxc9uptuOp9osI7M_De6UYkIPgmMUM0GBh91d7gEoZ04ikzKlF9A0qHwkU8-ZhXX_EUth8uFhnvCBhdocDpzVohCA9Bd1Ujs9wxH9QZolH8vgqWTfsaWZEKGJ6sfwYO-DTmgoCBKUkS3luf6rnbrhebTX7piAXvwuFut3W3YF4KPMCBSbnzaAheecuZKJtQzEOC7Wee216BY5rSP6YF5XBdBkl6NLvDykETP2_97qwWkQTpz-SJdH-FEpaGAEEvfIJEua-XZhxfcZRXOiLYgyDOhFqeD78MBbop_4bHF7kUU-RkbakzXfW9vyxxRrDw8CkaXkBS7MDX6bNcybz7vaFzs4f3ZosWPbpxCqVWCsCRc9j53bpsX9sSUGyXHx_IVKOm6Yu2ioOgNyLYS_G4xTgG0Ls6rvoY9Zbm3oL6vrE8O9wk24Lt6tYWj1YmDgAndp8NROXbIL1LQDoMCgb-PzwM9r7Ay33s3XAoJGWmTRpT1B27_fMLUIk7BTb2tas84ryC-vb9x1b7RW70fpbcgv4lSHMPBL8RFYPL4vdkPdWlVXEQln0KO5GYYql7AMGlJtyOcGMh9sA6rI_Q4Jsgm1zzzX40ZO-S2Li49T5kEd172oJ6PCtuu60Oh6F4hL4hoZAMXDRTntcYaychGlLmNqWu0LH4DveAB7vppS7Eh_fSLouaDBBb4lwJjQU6yIVDYKwdktZF3Q2F4PF8wPyn7-SYouGOh-fLlBx5DtEsa8j5nkNUPaJntnt00iEmOuRRbEh2w_L27RpkS6D1eG0nEo8pDKcpt5T0FfujomKlBihmG53aWqcuposojLvefTEZK272bbHonPnnDQL_RzPLhjqhdO1dm_7pUW3gks-xQhTQHYZfh6TCcutF4bZOdNAP2CwPezwPdK0BgxNu7Bmjh12EXncRz_Vxc_3AdcipiGpAG6d9i_apgiH0LwPJVAPySJKQSVR0QZlJZnTX-As6HlTk_V53J9a_QNA.dJsPQrWLPsnrL_zsHZLvHA",
  //         "token_type": "Bearer"}}}
  //   } else {
  //     return { getData: function() { return {"id_token":"eyJraWQiOiJlZWFISFVRaVhidnUzMFhNMHhLdVg5cnBIY2lKWEVBVDhRYjZWZ3p1VDBJPSIsImFsZyI6IlJTMjU2In0.eyJhdF9oYXNoIjoiZXhPdkI5NlN5eFFKRDFLMTU1dVp2QSIsInN1YiI6IjRjMTA2OWU2LWM4NDItNDE0OC04ODQwLWRhMzJlN2QyYWJkMCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9uekJqUGw5R3IiLCJjb2duaXRvOnVzZXJuYW1lIjoiZ3dhZGRlbGwiLCJvcmlnaW5fanRpIjoiMjNhZTcxNjctZmNhYS00Mzk4LTlmZmItM2I5ZDFmNTJmZGEzIiwiYXVkIjoiN2o1Y29qYTFjZXVuZzhwcmVlM2w0NGRmc3UiLCJldmVudF9pZCI6ImY4NGIyNjc0LWNmZTctNGUxMy1hYzkwLWYyYTdkZjdlNzNiMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjczNDcyNDAyLCJleHAiOjE2NzM1NTg4MDIsImlhdCI6MTY3MzQ3MjQwMiwianRpIjoiMTgyNGQ1NjMtMWVhYi00MDM2LTk5NDgtYWUwMGRkNTE0ZWJiIiwiZW1haWwiOiJvbm1pZGRsZWdyb3VuZEBnbWFpbC5jb20ifQ.XZSFtcVZro-PIfpBpAJnDHDnyuGscOVgvNabryArIZIn3hSKCnNTk-7HUnS9o1hRAXQou3XVtjqy_-f3RneiVihE3GwUZw9VBMz1Z1Tf6C8DDKYHCd1yOfeTPVDdx3-wlFXGOuJc3FvXcjLuB_6K8P-uR3K7vY1IGuSjvUisfFbTgAXBNxP4ogUOo4vyJTXgUMwtyAc6FDdCaYoizOanO6fOSd0TzjvcHYOqIAtdGDBCcAWDeXUyVmYGh80CiQJ57CZexGo--2cwVqVuaI2GHf6W8CtHcwRKDIQfMSxZOf73GBELC8R178O0bygnRvCOJrM4iDgM2HJJ2tp4ybvdVw","access_token":"eyJraWQiOiIwVTNDV29TbFJPSVcwS2NFVUVOTW1HbXR6Vjdjc1wvVjlVQVJLMDZOK3ZSOD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0YzEwNjllNi1jODQyLTQxNDgtODg0MC1kYTMyZTdkMmFiZDAiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9uekJqUGw5R3IiLCJ2ZXJzaW9uIjoyLCJjbGllbnRfaWQiOiI3ajVjb2phMWNldW5nOHByZWUzbDQ0ZGZzdSIsIm9yaWdpbl9qdGkiOiIyM2FlNzE2Ny1mY2FhLTQzOTgtOWZmYi0zYjlkMWY1MmZkYTMiLCJldmVudF9pZCI6ImY4NGIyNjc0LWNmZTctNGUxMy1hYzkwLWYyYTdkZjdlNzNiMSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoicGhvbmUgb3BlbmlkIGVtYWlsIiwiYXV0aF90aW1lIjoxNjczNDcyNDAyLCJleHAiOjE2NzM1NTg4MDIsImlhdCI6MTY3MzQ3MjQwMiwianRpIjoiNmJhNmJhZDEtYTJjNS00NDlmLTk2M2YtMDM2OTZkY2RlODVkIiwidXNlcm5hbWUiOiJnd2FkZGVsbCJ9.dXDSJ1ba6vyD7NfX634yw60vUjL-hJwMCDPACiC60lkmedve4Jnh-fccCdJfAGnWZwsO3s8pX3wdsu2rA938MKaS4nqYd0gL9lUSgmwjiPc3wMI5E_AXiwtxU_2Idiaedoo959OiYa0ie7hLA5yGmw0k5QmjQ8IRQqMlo9XWglAFi3ma5xsTde1_JLFPOStBD-XLNkIEp5WzuSu1YObTh786-IfbyZek-BadDwssEHj7Gqc_8-cnFTKWpoPH63T-TlIrf6V_acSCTOiDtDvw3c8pGoR9qiDr2dxdHWDP4ST5LYT1pqVE9Sk5SysxkVEvmQZ9Hi8Vl9kXlLFLQ5sEoA","refresh_token":"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.FigcZ0G7l6NBwP0IZ2GvXSo8N86io1VPP38d61bjqnk06KuN-4bhl4YgSbtozj9mpvWXA_h0lgeGGV_pb3Vd58fWF1E33a52t-E5NAN0sLkJImcU4Wjq2pYXyAHkilgiBjHlJWrPXLWeLGNUwz7orByOC00_C0Yz6r6YNZHa6DcnOwgewKnnBpCbKUwyQN9zpmHLOvpYh59f2pNlmua3ywyHMDjBW21qPojRJTz4Vwd7-WjZs51gK2Vsb7RLgzQPIx8mak14l_TCLUmWkcKvcD0vP1dg5__BAhg3e5g1E-SXC912tRYyhpD1D5M7FO3NcquleqiE56Rk0NQz0tIMvA.rjYTCJqxrcaT069L.FnT09j2G_1ZDVdyXNz-VwY5QBIEFGjAJkb66-DcFOnyBb4BfHSuxI4PYOjjVPADja3YMD0l1H99PJ3mBODMTSLWG6y1Jx2BR-KenW8nbnDNjZFL9rP3yXiaNJJIXMfLMa5_PH9fhMtqqid-_DpdTJG00vraPydkClZWXhcy-Tkt0TENwbcze1tFMZNFrIC37Z_OsCds6rq6b42R5NiI6NqGGH33Xv6FZ_m2ETFQyU-fI5EoAvxB9VYaV8Uic4Arxr29qA9EddqxN0ueB9c6hbwQD0ian23RDVJTqW4_Utu869Z47oY-2bxKroBXXmAHWiCjWUDd4G2guJSiYecosulmwwXJiC9rOb0bfln_hnDq2I2A0_LJfOs_BmZUzPwl5TMMkAJw6bWUAW8syAkhUbo6yiuSn1f88x_9nUZkttbPM4Xbhope_ygHJFYal6L076VRRRakqtiKW1BbgF_dtyTnrfu-Eof_kyXTpIp92kES4iWi4APckl67XGt28SLbE_zZYXZZXgITQFC5qSVb0gdZU8slWq5VBCxTCi-WSfvuefQengbe65iau-mhQNMkGMIkymWwm3JM6qRluRsGwgR0wCcaDEDdeXfQDXbFfEPhWCxOD5kydZ7-HOeeq1SDSmNZPXnNMDfJJ4UCnx2y1BtKP-LlQU4tEO3qoKiU5xhj6tyT3uLY_BDsot6VTBN1AM6icL-QT-H1tOc4rTNkAHBokGYOO981F1kH42otiwxfixY6acyMcvbKq3UsVCJcALVyWUNBEQWQnGC_ztzQGyLLMSnk9VCpzvLvMA4WL69JNX92lQm7r-nf6LZ035a2OrO0_6E-5fBMj3objzgAPlsObR4Q1IM0k1NLLzZXSALxlY53-yPGAO5KuMlcz6TVi4YxKhqsPi7hnvJ0WRQ_Z5D2xpTZwCceUpl492Unzt5ebR5AzWW4IaE5wq0bSzTFSQRJPIJyyXF55wuRNWh4qC2z2y_NFddqg9aC55tPUE6vePvrcc9hfXTo_aZ-TiIKPg1TAkjni9AnrQE5_B3V7I6gsEFuf6ciIbgxjc0eHoKgnpmQjOJ28s7oTYI3E3XBX-dU2vexb-lizDsrja5y9OO-0mbXB1cQFmvZkL95OsQht6B6pOOv3yw17-LirSisDysRQk9x1slJahH32U0CWxWyDtXuNaN-XJP9dxjM8i_lfyzf7bKEgVPm4wRSsjJdNUgV0t4ywx1F98Eq54c6O3aKOSAYTvjVZU17DuAIFiCL-t0280vWm78vxXWQTxsIVLxlO_ENiCQ.sY1WRU99xoE0lRUIoJx6nw","expires_in":86400,"token_type":"Bearer"} } };
  //   }
  // }

  // public async getRefreshToken(token: any) {
  //   return this.getMockedToken();
  // }
  //
  // public async getToken(code: string): Promise<any> {
  //   return this.getMockedToken();
  // }

  public samplePayload() {
    const sample = {
      at_hash: '3ZU9_1uEMxFyNI8Rz_aDkw',
      sub: 'b7d8f6d1-e63b-4c8e-bde4-80751d3dd4db',
      'cognito:groups': ['Admin'],
      email_verified: true,
      iss: 'https://cognito-idp.us-east-1.amazonaws.com/us-east-1_nzBjPl9Gr',
      'cognito:username': 'gwaddell',
      origin_jti: '179190ff-c8c8-4d03-b2d7-4156747c2877',
      aud: '7j5coja1ceung8pree3l44dfsu',
      event_id: '1ae020b6-ffc8-459c-a41f-be2f52a0b9c1',
      token_use: 'id',
      auth_time: 1676065578,
      exp: 1676151978,
      iat: 1676065578,
      jti: '2fbac39a-671c-4481-8452-6e391b389865',
      email: 'onmiddleground@gmail.com',
    };
  }
}
